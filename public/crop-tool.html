<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­ ë„êµ¬</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }

        h1 {
            color: #333;
            text-align: center;
        }

        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .profile-item {
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            background: #fafafa;
        }

        .profile-item img {
            width: 100%;
            height: auto;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .profile-item h3 {
            margin: 5px 0;
            color: #333;
            font-size: 16px;
        }

        .profile-item p {
            margin: 5px 0;
            color: #666;
            font-size: 12px;
        }

        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }

        button:hover {
            background: #45a049;
        }

        .download-btn {
            background: #2196F3;
        }

        .download-btn:hover {
            background: #0b7dda;
        }

        canvas {
            display: none;
        }

        .instructions {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .instructions h2 {
            margin-top: 0;
            color: #1976d2;
        }

        .instructions ol {
            margin: 10px 0;
            padding-left: 20px;
        }

        .instructions li {
            margin: 5px 0;
        }
    </style>
</head>

<body>
    <h1>ğŸŒï¸ ê³¨í”„ í´ëŸ½ ë©¤ë²„ í”„ë¡œí•„ ì´ë¯¸ì§€ í¬ë¡­ ë„êµ¬</h1>

    <div class="instructions">
        <h2>ì‚¬ìš© ë°©ë²•</h2>
        <ol>
            <li>ì•„ë˜ "ëª¨ë‘ ë‹¤ìš´ë¡œë“œ" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ëª¨ë“  í”„ë¡œí•„ ì´ë¯¸ì§€ê°€ ìë™ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œë©ë‹ˆë‹¤.</li>
            <li>ë‹¤ìš´ë¡œë“œëœ ì´ë¯¸ì§€ë“¤ì„ <code>public/images/profiles/</code> í´ë”ì— ì €ì¥í•˜ì„¸ìš”.</li>
            <li>ê°œë³„ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ë ¤ë©´ ê° í”„ë¡œí•„ ì•„ë˜ì˜ "ë‹¤ìš´ë¡œë“œ" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.</li>
        </ol>
    </div>

    <div class="container">
        <button onclick="downloadAll()" style="font-size: 16px; padding: 15px 30px;">ğŸ“¥ ëª¨ë‘ ë‹¤ìš´ë¡œë“œ</button>
        <div id="profilesContainer" class="image-grid"></div>
    </div>

    <canvas id="canvas"></canvas>

    <script>
        // í”„ë¡œí•„ ë°ì´í„° (ì´ë¦„, ì›ë³¸ ì´ë¯¸ì§€, í¬ë¡­ ì¢Œí‘œ)
        const profiles = [
            // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ ê·¸ë£¹
            { name: 'youngwoong', displayName: 'ê¹€ì˜ì›…', img: 'members_group1.jpg', x: 10, y: 10, w: 200, h: 240 },
            { name: 'hyomin', displayName: 'ê¹€íš¨ë¯¼', img: 'members_group1.jpg', x: 220, y: 10, w: 230, h: 260 },
            { name: 'jaeyeop', displayName: 'ì •ì¬ì—½', img: 'members_group1.jpg', x: 410, y: 110, w: 210, h: 280 },
            { name: 'jihoon', displayName: 'í™ì§€í›ˆ', img: 'members_group1.jpg', x: 620, y: 10, w: 190, h: 240 },
            { name: 'doyoon', displayName: 'ê¹€ë„ìœ¤', img: 'members_group1.jpg', x: 820, y: 10, w: 200, h: 240 },

            { name: 'manjong', displayName: 'ìœ ë§Œì¢…', img: 'members_group1.jpg', x: 10, y: 280, w: 240, h: 240 },
            { name: 'sungtae', displayName: 'ê¹€ì„±íƒœ', img: 'members_group1.jpg', x: 270, y: 410, w: 230, h: 240 },
            { name: 'yeonseong', displayName: 'ì‹ ì—°ì„±', img: 'members_group1.jpg', x: 525, y: 410, w: 230, h: 240 },
            { name: 'jaeho', displayName: 'ìµœì¬í˜¸', img: 'members_group1.jpg', x: 775, y: 280, w: 245, h: 240 },

            { name: 'sungjin2', displayName: 'ê¹€ì„±ì§„', img: 'members_group1.jpg', x: 10, y: 540, w: 250, h: 240 },
            { name: 'changwoon', displayName: 'ì–‘ì°½ìš´', img: 'members_group1.jpg', x: 770, y: 540, w: 250, h: 240 },

            // ë‘ ë²ˆì§¸ ì´ë¯¸ì§€ ê·¸ë£¹
            { name: 'kyungjun', displayName: 'ê¹€ê²½ì¤€', img: 'members_group2.jpg', x: 15, y: 30, w: 250, h: 250 },
            { name: 'junyoung', displayName: 'ê¹€ì¤€ì˜', img: 'members_group2.jpg', x: 280, y: 30, w: 250, h: 250 },
            { name: 'jangpyo', displayName: 'í™ì¥í‘œ', img: 'members_group2.jpg', x: 190, y: 295, w: 250, h: 250 },
        ];

        const images = {};
        let loadedCount = 0;

        // ì´ë¯¸ì§€ ë¡œë“œ
        function loadImages() {
            const imagesToLoad = ['members_group1.jpg', 'members_group2.jpg'];

            imagesToLoad.forEach(imgSrc => {
                const img = new Image();
                img.onload = function () {
                    images[imgSrc] = img;
                    loadedCount++;
                    if (loadedCount === imagesToLoad.length) {
                        renderProfiles();
                    }
                };
                img.onerror = function () {
                    console.error(`ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨: ${imgSrc}`);
                    alert(`ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${imgSrc}\\n\\npublic/images/ í´ë”ì— ì´ë¯¸ì§€ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.`);
                };
                img.src = `/images/${imgSrc}`;
            });
        }

        // í”„ë¡œí•„ ë Œë”ë§
        function renderProfiles() {
            const container = document.getElementById('profilesContainer');
            container.innerHTML = '';

            profiles.forEach(profile => {
                const croppedDataUrl = cropImage(profile);

                const div = document.createElement('div');
                div.className = 'profile-item';
                div.innerHTML = `
                    <img src="${croppedDataUrl}" alt="${profile.displayName}">
                    <h3>${profile.displayName}</h3>
                    <p>${profile.name}.jpg</p>
                    <button class="download-btn" onclick="downloadImage('${profile.name}', '${croppedDataUrl}')">
                        ë‹¤ìš´ë¡œë“œ
                    </button>
                `;
                container.appendChild(div);
            });
        }

        // ì´ë¯¸ì§€ í¬ë¡­
        function cropImage(profile) {
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            const img = images[profile.img];

            canvas.width = profile.w;
            canvas.height = profile.h;

            ctx.drawImage(img, profile.x, profile.y, profile.w, profile.h, 0, 0, profile.w, profile.h);

            return canvas.toDataURL('image/jpeg', 0.95);
        }

        // ê°œë³„ ë‹¤ìš´ë¡œë“œ
        function downloadImage(name, dataUrl) {
            const link = document.createElement('a');
            link.download = `${name}.jpg`;
            link.href = dataUrl;
            link.click();
        }

        // ëª¨ë‘ ë‹¤ìš´ë¡œë“œ
        function downloadAll() {
            let delay = 0;
            profiles.forEach(profile => {
                setTimeout(() => {
                    const croppedDataUrl = cropImage(profile);
                    downloadImage(profile.name, croppedDataUrl);
                }, delay);
                delay += 300; // 300ms ê°„ê²©ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œ
            });
            alert(`${profiles.length}ê°œì˜ í”„ë¡œí•„ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œë¥¼ ì‹œì‘í•©ë‹ˆë‹¤!\\n\\në‹¤ìš´ë¡œë“œëœ íŒŒì¼ë“¤ì„ public/images/profiles/ í´ë”ì— ì €ì¥í•˜ì„¸ìš”.`);
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ë¯¸ì§€ ë¡œë“œ
        window.onload = loadImages;
    </script>
</body>

</html>